<!DOCTYPE html>
<html lang="en">
  <div class="full">
<head  >
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.">
    <title>WEATHER FORECAST</title>
  <link rel="stylesheet" href="/static/styling.css">
</head>
<body id="body" >
    <div class="container" id="parent">
    <h1 id="heading"> Weather Forecast </h1>
       <br><br>
       <h1 style="text-align: center ">{{w_name}}</h1>
       <h1 style="text-align: center ">{{w_state}}</h1>
       <h1 style="text-align: center ">{{w_temp}} {{symbol}}</h1> 
       <h1 style="text-align: center ">{{w_condition}}</h1> 
       <img src="{{w_image}}"  class="center" > <br>
    
    <form action="/getWeather" method="post" style="text-align:center">
        <label class="box"> Enter city name: </label><br>
        <input list="citydata" type="text" placeholder="enter your city" id="city_Input" name="city" required><br>
        <datalist id="citydata">
            <option value=" ">
        </datalist>
       <div class="wrapper">
         <input type="submit" value="search" class="button" ></button>
       </div>
       </form>
       <br>
       <footer>
        <div class="foot"style="margin: 0; display: inline;  ">
          <a href="{{ url_for('logout')}}" >Logout</a>
        </div>
        
       </footer>
      </div>
    
    <script>

         cityyy = document.getElementById("city_Input");
         input_data = document.getElementById("citydata");
      
       if({{isExist}}==1){
          //  container = document.getElementById("parent");
          //  container.style.display="none";
          //  message = document.createElement('h1');
          //  message.innerHTML="city not found...";
          //  document.getElementById("body").appendChild(message);
           alert("city does not exist");
       }
        if({{isExist}}==2){
         document.getElementById("parent").style.display="none";
         }
       
         cityyy.addEventListener("focus",autocomplete);
         function autocomplete(){
            var xhr = new XMLHttpRequest();
            
            xhr.open("GET", "https://api.npoint.io/88da607373d247d35bb4",true);
            xhr.onload=function(){
            var cities = JSON.parse(this.responseText);
            for(let i in cities){
                list = document.createElement("option");
                list.value=cities[i].name;
                list.label= cities[i].subcountry + ' - ' + cities[i].country;
                input_data.appendChild(list);
                console.log(cities[i].name);
            }
            }
            xhr.send();
            }
    </script>
    </div>
</body>
</html>